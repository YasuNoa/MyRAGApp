# APIとエンドポイントの基礎解説

## 1. API (Application Programming Interface) とは？

APIは、**「ソフトウェア同士が会話するための窓口」**です。

一番わかりやすい例えは**「レストラン」**です。

*   **あなた（クライアント/ユーザー）**: お腹が空いて料理を注文したい人。
*   **キッチン（サーバー/データベース）**: 料理（データ）を作る場所。
*   **ウェイター（API）**: あなたの注文をキッチンに伝え、出来上がった料理をあなたに運ぶ人。

あなたがキッチンに入って勝手に料理を作る（データベースを直接いじる）ことはできませんよね？
必ず「ウェイター（API）」を通して、「メニュー（仕様）」にあるものを注文する必要があります。

Web開発の世界では：
*   **フロントエンド（画面）**が「注文（リクエスト）」を出し、
*   **バックエンド（API）**がそれを受け取って処理し、
*   **データ（レスポンス）**を返します。

---

## 2. エンドポイント (Endpoint) とは？

エンドポイントは、**「APIにアクセスするための特定の場所（URL）」**のことです。
レストランで言えば、「ドリンクの注文窓口」「フードの注文窓口」「お会計の窓口」のようなものです。

Web APIでは、URL（住所）とHTTPメソッド（動作）の組み合わせで決まります。

### 具体例
あなたのアプリが `https://my-rag-app.com` だとします。

| 動作 | HTTPメソッド | エンドポイント (URL) | 意味 |
| :--- | :--- | :--- | :--- |
| 記事一覧を取得 | **GET** | `/api/articles` | 「記事のリストをください」 |
| 新しい記事を作成 | **POST** | `/api/articles` | 「この内容で記事を作って」 |
| 特定の記事を取得 | **GET** | `/api/articles/123` | 「IDが123の記事をください」 |
| 記事を削除 | **DELETE** | `/api/articles/123` | 「IDが123の記事を消して」 |

このように、**「どこに（URL）」「どうしてほしいか（メソッド）」**を指定するのがエンドポイントです。

---

## 3. APIの実装方法 (Next.js App Router)

Next.js (App Router) では、非常に直感的にAPIを作ることができます。
フォルダ構造がそのままURL（エンドポイント）になります。

### 例：挨拶をするAPIを作る

**作りたいエンドポイント:** `/api/hello`

**手順:**
1.  `app` フォルダの中に `api` フォルダを作る。
2.  その中に `hello` フォルダを作る。
3.  その中に `route.ts` というファイルを作る。

**ファイルパス:** `app/api/hello/route.ts`

**コードの中身:**

```typescript
import { NextResponse } from 'next/server';

// GETリクエストを受け取る関数
// 誰かがブラウザで /api/hello にアクセスすると、この関数が動きます
export async function GET() {
  // 処理を行う（例：データベースからデータを取るなど）
  
  // レスポンス（返事）を返す
  return NextResponse.json({
    message: 'こんにちは！これはAPIからの返事です。',
    timestamp: new Date().toISOString(),
  });
}
```

### 実際にどう動く？

1.  あなたがブラウザで `http://localhost:3000/api/hello` にアクセスする。
2.  Next.jsが `app/api/hello/route.ts` の `GET` 関数を見つけて実行する。
3.  画面に以下のJSONデータが表示される。

```json
{
  "message": "こんにちは！これはAPIからの返事です。",
  "timestamp": "2025-12-02T12:00:00.000Z"
}
```

これがAPI実装の基本です！
「リクエストを受け取り、何か処理をして、データを返す関数を書く」だけです。
