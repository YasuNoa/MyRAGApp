.cursorrules,.agent,report2025の中身を確認して現状把握お願い


なんとなくだけど、あらかじめ入れておくことができる。
全員に共通するDBみたいなものがあるとめっちゃいいよね。

ーー要は、全員のデータベースに一律で追加することができる機能と、そもそもデフォルとで使い方とかを入れておくっていう。
・
・

将来的な拡張機能、使われ方としては、

・授業の文字起こし&資料を読み込ませる。+要点を出してといえば要点が出力される。
これで、授業のDBができる。

ーー入れるカテゴリを新規作成できる。
または、カテゴリを変更編集できる。
入力する時にカテゴリを指定することができるといいな。
カテゴリを作成して登録できるといいなぁ。

現状はカテゴリをこっちが自動で判別する仕様になっている。
しかし、ユーザーがカテゴリを作成して、AIがそにカテゴリを認識するっていうようにできるといいなと思う。

フロントエンドにプライバシーポリシーを作っておいてほしいな。LINEとかでもそういうの作んな意図いけなくなりそう。

個人で使うにはGCPは若干割高なのかな？収益が出てくるならいいか。


デフォルトで何個かデータを入れておきたいな。



1. 検索精度の劇的向上（Re-ranking）
何ができる？: 検索で見つけた「候補」を、別のAI（Cross-Encoder）でもう一度厳密に採点し直します。
効果: 「キーワードは合ってるけど文脈が違う」ものを排除でき、回答の精度が段違いに良くなります。 Pythonなら sentence-transformers で数行で実装できます。
2. 画像・スキャンPDFの読み取り（OCR）
何ができる？: 文字データが含まれていない「画像化されたPDF」や、写真の中の文字を読み取れます。
効果: 紙の資料をスキャンしたものも検索対象にできるようになります。
3. データ分析・グラフ化（Pandas）
何ができる？: ExcelやCSVをアップロードして、「このデータの傾向を教えて」と聞くと、集計してグラフを描画して返すことができます。
効果: RAGだけでなく「データ分析アシスタント」としても使えるようになります。
これユーザ増えたら使えそう


知識登録のとこで、手動でPDFと写真を載せられるようにしたい。
タスクに加えといて


・文字起こしさせて、その文字起こしをロングコンテキストで登録できるようにする。（文字数や）

まだ実装しないでほしいんだけど、
「授業を聞かなくてもいい」というサービスとしても使えるなと思っていて、
例えばwhisperで文字起こしさせて、その文字起こしを整理して、ロングコンテキストとして保存し、（イメージはNotionのミーティングノート）、このやり取りもチャットでできると嬉しいなぁ。

ロングコンテキストも通常の知識ベース管理のとこに入れることができるとすごくいい。
ナビゲーションに文字起こしっていう項目を作って、文字起こししたら、そのままインポートできるような仕組みにだと使いやすいか？
文字起こしを開始ボタンで、文字起こしを開始して、停止ボタンを押すと、誤字修正した長文を作り、その文章をロングコンテキストとして保存。
要約してRAGに保存みたいなイメージ
そこで授業情報をPDFに保存する

要約をジェミニでチャンク化しつつベクトル化して、メタデータで管理しつつ、
ロングコンテキストとしてPosgreに保存？っていう形になるのかな？

で、チャットでGeminiが検索かけるときは、要約はそのままPinecornから出して、細かい部分はロングコンテキストを検索して回答するイメージかな、、。
あんまよくわかってないが、それって可能？


UI/UX: 授業の録音〜振り返りの体験（Notionっぽくするか、チャットベースか）
Notionぽくするとは。授業の録音からインポートまで全部アプリ内で簡潔するっていう感じ？
新しいナビゲーション、授業のーとっていうナビゲーションを作成して、文字起こし、インポート、内容整理などなどをできるページを作成する。



データ構造: 授業ごとの管理方法や、科目・日付での整理
これめっちゃ問題で、普通のRAGアプリとしても使えるようにはしたいんよね。
ユーザーがカテゴリを指定できるといい。



マネタイズ: どういう課金モデルにするか（ストレージ容量？機能制限？）
マネタイズ、stripe?
ーーーーー

会話履歴が残るようにしたい。
チャットの部分にタグをつけたい。

Gdriveからファイルをインポートするときどうやってタグをつける？
学習ずみデータをタグごとにしぼれるように。

学習ずみデータのメニューのすでにインポートしたデータについて、
あとからタグをつけられるようにもしたいよね。未分類に。タグの変更とかも簡単にしたい。

-メニューを切り替えるとページがリフレッシュされてしまう状態なので、新規作成ボタンを右上に追加し、ユーザーが新規作成を押すまでは、それまでのやり取りを保持するようにさせたいんだけど、どうやって実装する形になるかな。

supabaseでPrismaを使いたい。

Webページ (URL) のインポート:
URLを指定して、そのページの記事本文を抽出して保存する機能。
「この記事あとで読む」感覚でAIに覚えさせられます。
YouTube動画のインポート:
YouTubeのURLを指定して、動画の字幕（書き起こし）を抽出して保存する機能。
動画の内容を検索できるようになります。

せっかくだからこの機会にAP Iの実装方法について勉強したい。
エンドポイントって？みたいな知識レベルなので、詳しめにお願い
例でGemini APIとか使ってくれるとうれしうす。


最初に出るポップアップを修正したい。
内容を。プロンプトの。

履歴出るようにしたいねー。そろそろマネタイズも考えないとねぇぇ


UIをスマホにあわせたいね。
スマホUIでのみ、サイドバーのメニューを押したらサイドバーが勝手に閉じるようにしたい。PCではいらないかな。

GeminiAPIを紐つけたい。

共有することはできるが、ログインしないと中身を見ることはできないようにもしたい。


バックエンドの制限ちょっと変更。

プランは３つのままFree,standard,premium
料金とモデル、検索エンジンの分岐もそのまま。

・Freeプランの制限として、一回の授業ノート(note)で録音できる時間を20分、資料保存数が5ファイルまで（/knowlegde/list）、チャット制限は10メッセージ送信したら、2時間使えなくなる制限（2時間後にまた10回やりとりできての繰り返し）。（DBスキーマ変更しなきゃ。）
手動アップロード（/knowlegde）における音声ファイルについては、以下の例のような流れで処理してほしい。（この音声アップロードと授業ノートの録音は合計で5回まで。）
処理の流れ:

受信: フロントエンドから90分のファイルを受け取る（一時保存）。

判定: ユーザーが FREE プランか確認。

加工: FREE なら、ffmpeg を使って「冒頭秒〜12000秒（20分）」だけを切り出す。

送信: 切り出した「20分版のデータ」だけを Gemini API に送って文字起こしさせる。

保存: 20分のテキストと要約をDBに保存。


・standardプランは授業ノートの文字起こし一回90分までの制限し、1日の制限は無くす。
資料保存数は200ファイル制限。
チャット制限は1日100回まで。
音声ファイルアップロードの制限は、１ファイル当たり120分で、音声ファイル自体は1800分まで可能。（こちらも授業ノートの文字起こしの時間との合算時間）

・Premiumプランは、文字起こしの時間は1回3時間まで可能。資料保存数も無制限(念の為1000)。チャット制限も-200まで。音声ファイル手動アップロードの1回当たりの制限もない。ただ念の為、月当たり100時間の制限をかける。

あとは音声アップロードと授業ノート単発で、それぞれ90分当たり100円でチケット販売って感じかな。

利用規約とPPクソ邪魔だから、ホームページだけに配置して、他のページには入れたくないなぁ。

制限ロジックは組んだので、あとはフロントのマネタイズの実装と
バックエンドの検索処理、使うライブラリなどの分岐をさせる。

まずはPC版。



LPでの体験版での制限はコスト面から厳しくしたいので、試しに今日あった出来事について30秒何か話してみてください。っていう入りにしようかな。

（音声は授業ノートのリアルタイム文字起こし&AI分析の30秒制限版。ユーザーが停止ボタンをおすor30秒経ったら勝手に要約作成開始してOK.）





画面半分左側には簡易的なチャット欄設けて、画面半分右上にマイクボタン、下にリアルタイム文字起こしされている文章。その下にAI３行要約っていう感じにしようかなと。



チャット欄では、保存した情報について質問することができる。（2回まで）



文字起こし試すのは1回のみで、それ以上やリタイ場合はログインして無料でやろう！で誘導。



保存ボタンも作って、ログインして保存しよう！的なノリでログインに誘導。

（実際は一時利用者ようのDB作って、一時的にそこに保存して、ログインしたらそのユーザーのDBに移動し、元のDBからは削除。一時的なDBにデータが追加されてから1時間経ったら、音声ファイルなどはPosgre,pinecornから削除。）





チャット制限も2回（検索エンジンはduckduckgo）にして、それ以降はログイン誘導で対応できるようにしたい。



全部制限を強調する必要はなく、ログインすれば無料で使えるよーと、自然に誘導できるようにしてほしい。



スキーマは、GuestSession モデルを追加し、Document にゲスト用の紐付けを持たせル感じで。

同一IPからのリクエストは1時間に3回まで（Bot対策）。


customserhAPIは月100まで無料（超過分は5$/1000）
spererは初期2500まで無料。（超過は$1/1000）

LP構成案。
「サンプルデータ」で疑似体験させる（コスト0円・爆速）
ユーザーの手元のファイルを使わせる前に、「実際にこのアプリで解析した90分授業の結果」 を3パターンほど用意し、ワンクリックで見せます。

UI:

「あなたの専攻に近い授業を選んでください」

[📐 線形代数 (90分)] [⚖️ 憲法入門 (90分)] [🇬🇧 英語コミュニケーション (60分)]

クリック後の挙動:

一瞬で 解析画面（デモ画面）に遷移。

実際のアプリと同じUIで、タイムラインごとの要約、重要語句、テスト対策クイズを表示。

メリット: ユーザーは「自分の授業もこうなるのか！」と具体的にイメージできます。待ち時間もアップロードの手間もゼロです。

新規チャットの画面が、質問送った時の文字と被る。サイドバーに新規チャットを以降しよう。みんなが慣れているだろうChatGptっぽくしよう。

メッセージ入力するセクションの位置は固定したい。現在、スクロールで結構動いてしまう。

パスワード忘れた人用のページねぇ。