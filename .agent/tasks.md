# タスク管理 (tasks.md)

## 現在のステータス
**フェーズ**: プロトタイプ実装完了・機能拡張フェーズ
**優先度**: 高 (バグ修正・安定化) > 中 (機能追加) > 低 (リファクタリング)

## 残タスク一覧

### 1. 機能改善・追加
- [ ] **メッセージのタグ対応**
    - [ ] `Message` テーブルの `category` カラムを `tags` (String[]) に変更、または併用から移行。
    - [ ] LINE Botの「振り返り」機能をタグベースのグルーピングに更新。
- [ ] **Google Drive連携の強化**
    - [ ] フォルダ階層のサポート。
    - [ ] 定期的な自動同期機能 (Webhook or Cron)。
- [ ] **UI/UXのブラッシュアップ**
    - [ ] モバイル対応の強化 (レスポンシブデザインの微調整)。
    - [ ] ダークモード/ライトモードの切り替え (現在はダーク基調)。
    - [ ] ローディング状態のスケルトン表示。

### 2. バックエンド・インフラ
- [ ] **エラーハンドリングの強化**
    - [ ] PythonバックエンドのエラーをFrontendでより詳細に表示。
    - [ ] OCR失敗時やGemini API制限時のリトライ処理。
- [ ] **デプロイ準備**
    - [ ] Vercel (Frontend) + Render/Railway (Backend) へのデプロイ構成の検証。
    - [ ] 環境変数の整理とセキュリティチェック。

### 3. リファクタリング・保守
- [ ] **コードの共通化**
    - [ ] `src/lib/gemini.ts` と Pythonバックエンドの役割分担の明確化 (現在は両方でGeminiを呼んでいる箇所がある)。
    - [ ] 型定義 (`types/`) の整備と共有。
- [ ] **テスト**
    - [ ] Backendの単体テスト (Pytest)。
    - [ ] Frontendのコンポーネントテスト (Jest/Vitest)。

## 完了済みタスク (直近)
- [x] **UI/UX改善**
    - [x] サイドバーの再構成 (「学習済みデータ」の独立ページ化)。
    - [x] 学習済みデータ一覧ページ (`/knowledge/list`) の実装 (Gridレイアウト, 削除機能)。
    - [x] チャット画面へのタグフィルタリング機能 (プルダウン) 追加。
    - [x] 使い方ガイド (`/usage`) の更新。
- [x] **マルチタグ (Category -> Tags) への移行**
    - [x] DBスキーマ変更。
    - [x] Frontend `TagInput` コンポーネント実装 (IME対応, onBlur対応)。
    - [x] Backend `/query`, `/import` のタグ対応。
- [x] **バグ修正・安定化**
    - [x] 削除処理のアトミック化 (PostgreSQL + Pinecone)。
    - [x] `backend/main.py` のSyntax Error修正。
    - [x] 依存ライブラリ (`@google/generative-ai` 等) の追加。
- [x] **整合性チェック**
    - [x] `api/upload`, `api/webhook/line` のタグ対応漏れ修正。
