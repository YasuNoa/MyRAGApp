{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../app/page.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","\"use client\"; // クライアントコンポーネントとして宣言（ブラウザ側で動く機能を使うため）\n\nimport { useState } from \"react\";\n\n// メインページ（Home）のコンポーネントです。\n// ユーザーがブラウザでアクセスした時に最初に表示される画面です。\nexport default function Home() {\n  // 入力されたメッセージを管理する状態（State）\n  const [input, setInput] = useState(\"\");\n  // チャット履歴を管理する状態\n  const [messages, setMessages] = useState<{ role: string; content: string }[]>([]);\n  // ローディング中かどうかを管理する状態\n  const [isLoading, setIsLoading] = useState(false);\n\n  // 送信ボタンが押された時の処理\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault(); // フォームのデフォルトの送信動作（ページリロード）をキャンセル\n    if (!input.trim()) return;\n\n    // ユーザーのメッセージを履歴に追加\n    const userMessage = { role: \"user\", content: input };\n    setMessages((prev) => [...prev, userMessage]);\n    setInput(\"\"); // 入力欄をクリア\n    setIsLoading(true);\n\n    try {\n      // バックエンドのAPI（/ask）にリクエストを送信\n      // 注意: 現在はローカル開発環境のポート3000（Next.js）とバックエンドのポートが競合する可能性があるため、\n      // バックエンドが別のポート（例: 3001）で動いているか、あるいは Vercel 上の URL を指定する必要があります。\n      // ここでは一旦相対パスで書きますが、構成に合わせて調整が必要です。\n      const res = await fetch(\"/api/ask\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ query: userMessage.content }),\n      });\n\n      const data = await res.json();\n      \n      // AIの回答を履歴に追加\n      const botMessage = { role: \"assistant\", content: data.answer || \"エラーが発生しました\" };\n      setMessages((prev) => [...prev, botMessage]);\n    } catch (error) {\n      console.error(\"Error:\", error);\n      setMessages((prev) => [...prev, { role: \"assistant\", content: \"通信エラーが発生しました\" }]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div style={{ maxWidth: \"600px\", margin: \"0 auto\", padding: \"20px\", fontFamily: \"sans-serif\" }}>\n      <h1>My RAG App</h1>\n      \n      {/* チャット履歴の表示エリア */}\n      <div style={{ \n        border: \"1px solid #ccc\", \n        borderRadius: \"8px\", \n        padding: \"20px\", \n        height: \"400px\", \n        overflowY: \"auto\",\n        marginBottom: \"20px\",\n        backgroundColor: \"#f9f9f9\"\n      }}>\n        {messages.length === 0 && <p style={{ color: \"#888\", textAlign: \"center\" }}>何か質問してください</p>}\n        {messages.map((msg, index) => (\n          <div key={index} style={{ \n            marginBottom: \"10px\", \n            textAlign: msg.role === \"user\" ? \"right\" : \"left\" \n          }}>\n            <span style={{ \n              display: \"inline-block\", \n              padding: \"10px 15px\", \n              borderRadius: \"15px\", \n              backgroundColor: msg.role === \"user\" ? \"#007bff\" : \"#e9ecef\",\n              color: msg.role === \"user\" ? \"#fff\" : \"#333\",\n              maxWidth: \"80%\"\n            }}>\n              {msg.content}\n            </span>\n          </div>\n        ))}\n        {isLoading && <div style={{ textAlign: \"left\", color: \"#888\" }}>考え中...</div>}\n      </div>\n\n      {/* 入力フォーム */}\n      <form onSubmit={handleSubmit} style={{ display: \"flex\", gap: \"10px\" }}>\n        <input\n          type=\"text\"\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          placeholder=\"質問を入力...\"\n          style={{ flex: 1, padding: \"10px\", borderRadius: \"4px\", border: \"1px solid #ccc\" }}\n          disabled={isLoading}\n        />\n        <button \n          type=\"submit\" \n          style={{ \n            padding: \"10px 20px\", \n            backgroundColor: \"#007bff\", \n            color: \"#fff\", \n            border: \"none\", \n            borderRadius: \"4px\", \n            cursor: isLoading ? \"not-allowed\" : \"pointer\" \n          }}\n          disabled={isLoading}\n        >\n          送信\n        </button>\n      </form>\n    </div>\n  );\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2]}